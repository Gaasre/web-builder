<div>
    <div [ngClass]="{selected: block.selected}" (contextmenu)="onRightClick(block)" (click)="selectBlock(block)" nz-row class="content">
        <i nz-col nzSpan="4" *ngIf="hasChildren" (click)="Toggle()" nz-icon [nzType]="block.open ? 'down' : 'right'" nzTheme="outline"></i>
        <span nz-col nzSpan="16">{{block.name}}</span>
        <i *ngIf="block.type.id === 1" nz-col nzSpan="4" nz-icon nzType="block" nzTheme="outline"></i>
        <i *ngIf="block.type.id === 2" nz-col nzSpan="4" nz-icon nzType="field-string" nzTheme="outline"></i>
        <i *ngIf="block.type.id === 3" nz-col nzSpan="4" nz-icon nzType="picture" nzTheme="outline"></i>
        <i *ngIf="block.type.id === 4" nz-col nzSpan="4" nz-icon nzType="form" nzTheme="outline"></i>
        <div #contextmenu class="context-menu" [ngStyle]="{display: contextMenuOpen ? 'block' : 'none'}">
            <ul>
                <li *ngIf="block.type.id === 1" (click)="newBlock()"><i nz-icon nzType="block" nzTheme="outline"></i> New Block</li>
                <li *ngIf="block.type.id === 1" (click)="newText()"><i nz-icon nzType="field-string" nzTheme="outline"></i> New Text</li>
                <li *ngIf="block.type.id === 1" (click)="newPicture()"><i nz-icon nzType="picture" nzTheme="outline"></i> New Picture</li>
                <li *ngIf="block.type.id === 1" (click)="newButton()"><i nz-icon nzType="form" nzTheme="outline"></i> New Button</li>
                <li *ngIf="block.type.id === 1" (click)="newIcon()"><i nz-icon nzType="block" nzTheme="outline"></i> New Icon</li>
                <li (click)="deleteBlock(block)"><i nz-icon nzType="delete" nzTheme="outline"></i> Delete</li>
            </ul>
        </div>
    </div>
    <div cdkDropList (cdkDropListDropped)="drop($event)" class="children" *ngIf="block.open">
        <div class="child" *ngFor="let block of block.children" cdkDrag>
            <app-layer (selectionChanged)="onSelect($event)" [block]="block"></app-layer>
        </div>
    </div>
</div>
